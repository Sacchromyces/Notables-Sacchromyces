<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<title>Notables</title>

<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<style>
  body {
    font-family: sans-serif;
    background: #111;
    color: #eee;
    text-align: center;
    margin:0;
    padding:20px;
  }

  /* Header with logo */
  #mainHeader {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 10px;
    margin-bottom: 20px;
  }
  #mainHeader img#logo {
    width: 30px;  /* desktop size */
    height: 30px;
    object-fit: contain;
  }
  #mainHeader h1 {
    margin: 0;
    font-size: 28px;
    font-weight: bold;
  }

  #albums {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 20px;
  }
  .album, .home-square {
    width: 200px;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
  }
  .album img, .home-square img {
    width: 200px;
    height: 200px;
    object-fit: cover;
    border-radius: 10px;
    border: 2px solid #555;
    margin-bottom: 10px;
    transition: transform 0.2s;
  }
  .album img:hover, .home-square img:hover {
    transform: scale(1.05);
  }
  .album-title {
    font-weight: bold;
    margin-bottom: 5px;
  }
  #playerArea {
    margin-top: 10px;
  }
  #playlist button {
    margin: 5px;
    padding: 10px 15px;
    background: #222;
    border: 1px solid #555;
    color: #eee;
    cursor: pointer;
    border-radius: 5px;
    display: block;
    width: 220px;
    margin-left:auto;
    margin-right:auto;
    transition: background 0.2s;
  }
  #playlist button:hover { background: #444; }
  #nowPlaying { margin: 10px 0; font-weight: bold; }
  audio { margin-top: 12px; width: 95%; max-width: 1000px; outline: none; background: #222; color: #eee; }

  #controls {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    gap: 20px;
    align-items:center;
  }

  .control-btn {
    width: 50px; height: 50px;
    border-radius: 50%;
    border: none;
    background: #444;
    color: #fff;
    font-size: 20px;
    display:flex; justify-content:center; align-items:center;
    cursor:pointer;
    transition: transform 0.2s, filter 0.2s;
  }
  .control-btn:hover { transform: scale(1.1); filter: brightness(1.2); }
  #play { width: 60px; height: 60px; font-size: 28px; }

  @media (max-width:480px) {
    body { padding:10px; font-size:16px; padding-bottom: 160px; }

    #mainHeader img#logo {
      width: 25px;  /* mobile size */
      height: 25px;
    }
    #mainHeader h1 {
      font-size: 22px;
    }

    #albums { flex-direction: column; gap: 15px; align-items: center; }
    .album, .home-square { width: 90%; }
    .album img, .home-square img { width:100%; height:auto; }
    .control-btn { width:50px; height:50px; font-size:20px; }
    #play { width:60px; height:60px; font-size:28px; }
    #playlist button { width:95%; padding:12px; font-size:16px; }
    audio { width:100%; }
    #albumTitle { font-size:20px; }

    #mobilePlayer {
      position: fixed;
      left: 0;
      width: 100%;
      background: #111;
      padding: 10px 0;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.5);
      z-index: 9999;
      transition: all 0.3s ease;
    }
    #mobilePlayer.docked { position: absolute; box-shadow: none; }
    #albumTitle, #playlist { margin-bottom: 20px; }

    .home-square img { display: none; }
    .home-square {
      background:#222;
      border:1px solid #555;
      border-radius:6px;
      padding:12px;
      font-weight:bold;
      font-size:18px;
      color:#eee;
      text-align:center;
      width:90%;
      box-sizing:border-box;
    }
    .home-square:hover { background:#333; }
  }
</style>
</head>
<body>

<!-- Header -->
<div id="mainHeader">
  <img id="logo" src="Notables_Logo.jpg" alt="Notables Logo">
  <h1>Notables</h1>
</div>

<div id="albums"></div>
<h2 id="albumTitle"></h2>
<div id="playerArea">
  <div id="playlist"></div>
  <p id="nowPlaying">Now Playing: None</p>
</div>

<div id="mobilePlayer">
  <div id="controls">
    <button id="prev" class="control-btn" title="Previous">&#10094;</button>
    <button id="play" class="control-btn" title="Play/Pause">&#9654;</button>
    <button id="next" class="control-btn" title="Next">&#10095;</button>
  </div>
  <audio id="player" controls>
    <source id="source" src="" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
</div>

<script>
const albums = {
  "Vessel": { cover:"Vessel.jpg", songs:[
    {file:"Ode_to_Sleep.mp3", title:"Ode to Sleep"},
    {file:"Migraine.mp3", title:"Migraine"},
    {file:"House_of_Gold.mp3", title:"House of Gold"},
    {file:"Car_Radio.mp3", title:"Car Radio"},
    {file:"Semi_Automatic.mp3", title:"Semi-Automatic"},
    {file:"Screen.mp3", title:"Screen"},
    {file:"The_Run_and_Go.mp3", title:"The Run and Go"},
    {file:"Fake_You_Out.mp3", title:"Fake You Out"},
    {file:"Guns_for_Hands.mp3", title:"Guns for Hands"},
    {file:"Truce.mp3", title:"Truce"},
    {file:"Addict_with_a_Pen.mp3", title:"Addict with a Pen"},
    {file:"Lovely.mp3", title:"Lovely"},
    {file:"Blasphemy.mp3", title:"Blasphemy"},
    {file:"Holding_on_to_you.mp3", title:"Holding on to You"}
  ]},
  "Blurryface": { cover:"Blurryface.jpg", songs:[
    {file:"Stressed_Out.mp3", title:"Stressed Out"},
    {file:"Ride.mp3", title:"Ride"},
    {file:"Fairly_Local.mp3", title:"Fairly Local"},
    {file:"Tear_in_My_Heart.mp3", title:"Tear in My Heart"},
    {file:"Lane_Boy.mp3", title:"Lane Boy"},
    {file:"The_Judge.mp3", title:"The Judge"},
    {file:"Doubt.mp3", title:"Doubt"},
    {file:"Polarize.mp3", title:"Polarize"},
    {file:"We_Dont_Believe_Whats_On_TV.mp3", title:"We Don't Believe What's on TV"},
    {file:"Message_Man.mp3", title:"Message Man"},
    {file:"Hometown.mp3", title:"Hometown"},
    {file:"Not_Today.mp3", title:"Not Today"},
    {file:"Goner.mp3", title:"Goner"}
  ]},
  "2009 21 Pilots": { cover:"2009_21_Cover.jpg", songs: [
    {file:"Implicit_Demand_For_Proof.mp3", title:"Implicit Room For Demand"},
    {file:"Fall_Away.mp3", title:"Fall Away"},
    {file:"The_Pantaloon.mp3", title:"The Pantaloon"},
    {file:"Friend,_Please.mp3", title:"Friend, Please"},
    {file:"March_To_The_Sea.mp3", title:"March To The Sea"},
    {file:"Johnny_Boy.mp3", title:"Johnny Boy"},
    {file:"Oh_Ms._Believer.mp3", title:"Oh Ms Believer"},
    {file:"Air_Catcher.mp3", title:"Air Catcher"},
    {file:"Trapdoor.mp3", title:"Trapdoor"},
    {file:"A_Car,_a_Torch,_a_Death.mp3", title:"A Car, a Torch, a Death"},
    {file:"Taxi_Cab.mp3", title:"Taxi Cab"},
    {file:"Before_You_Start_Your_Day.mp3", title:"Before You Start Your Day"},
    {file:"Isle_of_Flightless_Birds.mp3", title:"Isle of Flightless Birds"}
  ]}
};

let currentAlbum=null, currentSong=0, lastAlbum=null;
const player=document.getElementById("player");
const source=document.getElementById("source");
const nowPlaying=document.getElementById("nowPlaying");
const albumTitle=document.getElementById("albumTitle");
const albumsDiv=document.getElementById("albums");
const playlistDiv=document.getElementById("playlist");
const playBtn=document.getElementById("play");
const mobilePlayer=document.getElementById("mobilePlayer");

function updateMediaSession(song){
  if('mediaSession' in navigator && currentAlbum){
    const ext = albums[currentAlbum].cover.split('.').pop().toLowerCase();
    navigator.mediaSession.metadata=new MediaMetadata({
      title:song.title,
      artist:currentAlbum,
      album:currentAlbum,
      artwork:[{src:albums[currentAlbum].cover,sizes:'300x300',type:`image/${ext}`}]
    });
    navigator.mediaSession.setActionHandler('play',()=>player.play());
    navigator.mediaSession.setActionHandler('pause',()=>player.pause());
    navigator.mediaSession.setActionHandler('previoustrack',()=>prevTrack());
    navigator.mediaSession.setActionHandler('nexttrack',()=>nextTrack());
  }
}

function loadAlbum(name){
  currentAlbum=name; lastAlbum=name; currentSong=0;
  albumTitle.textContent=name;
  playlistDiv.innerHTML="";
  albums[name].songs.forEach((song,index)=>{
    const btn=document.createElement("button");
    btn.textContent=song.title;
    btn.addEventListener("click",()=>playSong(index));
    playlistDiv.appendChild(btn);
  });
}

function playSong(index, albumName=null){
  if(albumName) currentAlbum = albumName;
  if(!currentAlbum && lastAlbum) currentAlbum = lastAlbum;
  if(!currentAlbum) return;

  const songs = albums[currentAlbum].songs;
  if(index<0||index>=songs.length) return;
  currentSong=index;
  const song = songs[currentSong];
  source.src=song.file;
  player.load();
  player.play().catch(err=>console.log("Autoplay prevented:",err));
  playBtn.innerHTML="&#10074;&#10074;";
  nowPlaying.textContent="Now Playing: "+song.title;
  lastAlbum = currentAlbum;
  updateMediaSession(song);
}

function nextTrack(){
  if(!currentAlbum && lastAlbum) currentAlbum=lastAlbum;
  if(!currentAlbum) return;
  currentSong++;
  if(currentSong>=albums[currentAlbum].songs.length) currentSong=0;
  playSong(currentSong);
}

function prevTrack(){
  if(!currentAlbum && lastAlbum) currentAlbum=lastAlbum;
  if(!currentAlbum) return;
  currentSong--;
  if(currentSong<0) currentSong=albums[currentAlbum].songs.length-1;
  playSong(currentSong);
}

// Home tile
const homeSquare=document.createElement("div");
homeSquare.className="home-square";
homeSquare.innerHTML=`<img src="Home.jpg" alt="Home"><div class="album-title">Home</div>`;
homeSquare.addEventListener("click",()=>{
  playlistDiv.innerHTML="";
  albumTitle.textContent="";
  if(!currentAlbum && player.paused){
    nowPlaying.textContent="Now Playing: None";
  }
});
albumsDiv.appendChild(homeSquare);

// Album tiles
Object.keys(albums).forEach(name=>{
  const albumDiv=document.createElement("div");
  albumDiv.className="album";
  albumDiv.innerHTML=`<img src="${albums[name].cover}" alt="${name}"><div class="album-title">${name}</div>`;
  albumDiv.addEventListener("click",()=>loadAlbum(name));
  albumsDiv.appendChild(albumDiv);
});

// Controls
playBtn.addEventListener("click",()=>{
  if(player.paused){
    if(!currentAlbum){
      const albumNames = Object.keys(albums);
      const randomAlbum = albumNames[Math.floor(Math.random()*albumNames.length)];
      const songIndex = Math.floor(Math.random()*albums[randomAlbum].songs.length);
      playSong(songIndex, randomAlbum);
    } else { player.play(); }
    playBtn.innerHTML="&#10074;&#10074;";
  } else { player.pause(); playBtn.innerHTML="&#9654;"; }
});

document.getElementById("next").addEventListener("click", nextTrack);
document.getElementById("prev").addEventListener("click", prevTrack);
player.addEventListener("pause",()=>playBtn.innerHTML="&#9654;");
player.addEventListener("play",()=>playBtn.innerHTML="&#10074;&#10074;");
player.addEventListener("ended", nextTrack);

// Mobile sticky player slide & dock
window.addEventListener('scroll', ()=>{
  if(window.innerWidth > 480) return; 
  const nowPlayingRect = nowPlaying.getBoundingClientRect();
  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
  const scrollBottom = document.documentElement.scrollHeight - window.innerHeight - scrollTop;
  const distanceToNowPlayingBottom = nowPlayingRect.bottom + window.scrollY;

  if(scrollBottom < 5){
    mobilePlayer.style.position = 'absolute';
    mobilePlayer.style.top = (distanceToNowPlayingBottom + 15) + 'px';
    mobilePlayer.style.bottom = 'auto';
  } else {
    mobilePlayer.style.position = 'fixed';
    mobilePlayer.style.bottom = '0';
    mobilePlayer.style.top = 'auto';
  }
});
</script>
</body>
</html>

