<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<title>Notables</title>

<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="Notables_Logo.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="Notables_Logo.jpg">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<style>
body {
    font-family: sans-serif;
    background: #111;
    color: #eee;
    text-align: center;
    margin:0;
    padding:20px;
}

/* Header */
#mainHeader {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 10px;
    margin-bottom: 20px;
}
#mainHeader img#logo {
    width: 50px; height: 50px; object-fit: cover; border-radius: 50%;
}
#mainHeader h1 { margin: 0; font-size: 28px; font-weight: bold; }

/* Albums */
#albums {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 20px;
}
.album, .home-square {
    width: 200px; display: flex; flex-direction: column; align-items: center; cursor: pointer;
}
.album img, .home-square img {
    width: 200px; height: 200px; object-fit: cover; border-radius: 10px;
    border: 2px solid #555; margin-bottom: 10px; transition: transform 0.2s;
}
.album img:hover, .home-square img:hover { transform: scale(1.05); }
.album-title { font-weight: bold; margin-bottom: 5px; }

/* Playlist + Now Playing */
#playerArea { margin-top: 10px; }
#playlist button {
    margin: 5px; padding: 10px 15px; background: #222;
    border: 1px solid #555; color: #eee; cursor: pointer;
    border-radius: 5px; display: block; width: 220px;
    margin-left:auto; margin-right:auto;
    transition: background 0.2s, filter 0.2s;
}
#playlist button:hover { background: #444; }
#playlist button.playing { background: #555; color: #ccc; filter: brightness(0.8); }
#nowPlaying { margin: 10px 0; font-weight: bold; }

/* Player + Controls */
audio { margin-top: 12px; width: 95%; max-width: 1000px; background: #222; color: #eee; }

#controls {
    margin-top: 10px; display: flex; justify-content: center; gap: 15px; align-items:center;
}
.control-btn {
    width: 50px; height: 50px; border-radius: 50%; border: none;
    background: #444; color: #fff; font-size: 20px;
    display:flex; justify-content:center; align-items:center;
    cursor:pointer; transition: transform 0.2s, filter 0.2s;
}
.control-btn:hover { transform: scale(1.1); filter: brightness(1.2); }
.control-btn.active { background: #666; filter: brightness(1.3); }
#play { width: 60px; height: 60px; font-size: 28px; }

@media (max-width:480px) {
    body { padding:10px; font-size:16px; padding-bottom: 160px; }
    #mainHeader img#logo { width: 30px; height: 30px; }
    #mainHeader h1 { font-size: 22px; }
    #albums { flex-direction: column; gap: 15px; align-items: center; }
    .album, .home-square { width: 90%; }
    .album img, .home-square img { width:100%; height:auto; }
    .control-btn { width:50px; height:50px; font-size:20px; }
    #play { width:60px; height:60px; font-size:28px; }
    #playlist button { width:95%; padding:12px; font-size:16px; }
    audio { width:100%; }
    #albumTitle { font-size:20px; }
    #mobilePlayer {
        position: fixed; left: 0; width: 100%; background: #111; padding: 10px 0;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.5); z-index: 9999; transition: all 0.3s ease;
    }
    #mobilePlayer.docked { position: absolute; box-shadow: none; }
    #albumTitle, #playlist { margin-bottom: 20px; }
    .home-square img { display: none; }
    .home-square {
        background:#222; border:1px solid #555; border-radius:6px;
        padding:12px; font-weight:bold; font-size:18px; color:#eee;
        text-align:center; width:90%; box-sizing:border-box;
    }
    .home-square:hover { background:#333; }
}
</style>
</head>
<body>

<div id="mainHeader">
  <img id="logo" src="Notables_Logo.jpg" alt="Notables Logo">
  <h1>Notables</h1>
</div>

<div id="albums"></div>
<h2 id="albumTitle"></h2>
<div id="playerArea">
  <div id="playlist"></div>
  <p id="nowPlaying">Now Playing: None</p>
</div>

<div id="mobilePlayer">
  <div id="controls">
    <button id="shuffle" class="control-btn" title="Shuffle">&#x1F500;</button>
    <button id="prev" class="control-btn" title="Previous">&#10094;</button>
    <button id="play" class="control-btn" title="Play/Pause">&#9654;</button>
    <button id="next" class="control-btn" title="Next">&#10095;</button>
    <button id="repeat" class="control-btn" title="Repeat">&#x1F501;</button>
  </div>
  <audio id="player" controls>
    <source id="source" src="" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
</div>

<script>
const albums = {
  "Vessel": { cover:"Vessel.jpg", songs:[ {file:"Ode_to_Sleep.mp3", title:"Ode to Sleep"}, {file:"Migraine.mp3", title:"Migraine"} ]},
  "Blurryface": { cover:"Blurryface.jpg", songs:[ {file:"Stressed_Out.mp3", title:"Stressed Out"}, {file:"Ride.mp3", title:"Ride"} ]}
};

let currentAlbum = null, currentSong = 0, lastAlbum = null;
let shuffle = false;
let repeatMode = 0; // 0=off, 1=one, 2=all

const player=document.getElementById("player");
const source=document.getElementById("source");
const nowPlaying=document.getElementById("nowPlaying");
const albumTitle=document.getElementById("albumTitle");
const albumsDiv=document.getElementById("albums");
const playlistDiv=document.getElementById("playlist");
const playBtn=document.getElementById("play");
const shuffleBtn=document.getElementById("shuffle");
const repeatBtn=document.getElementById("repeat");

function updatePlaylistButtons(){
  [...playlistDiv.querySelectorAll("button")].forEach((btn,i)=>{
    btn.classList.toggle("playing", i===currentSong);
  });
}

function loadAlbum(name){
  currentAlbum=name; lastAlbum=name; currentSong=0;
  albumTitle.textContent=name;
  playlistDiv.innerHTML="";
  albums[name].songs.forEach((song,i)=>{
    const b=document.createElement("button");
    b.textContent=song.title;
    b.onclick=()=>playSong(i);
    playlistDiv.appendChild(b);
  });
  updatePlaylistButtons();
}

function playSong(i, albumName=null){
  if(albumName) loadAlbum(albumName);
  if(!currentAlbum && lastAlbum) currentAlbum=lastAlbum;
  if(!currentAlbum) return;
  currentSong=i;
  const song=albums[currentAlbum].songs[currentSong];
  source.src=song.file; player.load(); player.play();
  playBtn.innerHTML="&#10074;&#10074;";
  nowPlaying.textContent="Now Playing: "+song.title;
  updatePlaylistButtons();
}

function nextTrack(){
  if(shuffle){
    const len=albums[currentAlbum].songs.length;
    let newIdx=Math.floor(Math.random()*len);
    if(newIdx===currentSong && len>1) newIdx=(newIdx+1)%len;
    playSong(newIdx);
  } else {
    currentSong++;
    if(currentSong>=albums[currentAlbum].songs.length){
      if(repeatMode===2) currentSong=0; else return;
    }
    playSong(currentSong);
  }
}
function prevTrack(){
  currentSong--;
  if(currentSong<0) currentSong=albums[currentAlbum].songs.length-1;
  playSong(currentSong);
}

// Shuffle toggle
shuffleBtn.onclick=()=>{
  shuffle=!shuffle;
  shuffleBtn.classList.toggle("active", shuffle);
};
// Repeat toggle
repeatBtn.onclick=()=>{
  repeatMode=(repeatMode+1)%3;
  repeatBtn.classList.remove("active");
  if(repeatMode>0) repeatBtn.classList.add("active");
  repeatBtn.title = repeatMode===0?"Repeat Off":repeatMode===1?"Repeat One":"Repeat All";
};

// Events
playBtn.onclick=()=>{
  if(player.paused){ player.play(); playBtn.innerHTML="&#10074;&#10074;"; }
  else { player.pause(); playBtn.innerHTML="&#9654;"; }
};
player.addEventListener("ended", ()=>{
  if(repeatMode===1){ playSong(currentSong); }
  else nextTrack();
});
document.getElementById("next").onclick=nextTrack;
document.getElementById("prev").onclick=prevTrack;

// Home tile
const homeSquare=document.createElement("div");
homeSquare.className="home-square";
homeSquare.innerHTML=`<img src="Home.jpg"><div class="album-title">Home</div>`;
homeSquare.onclick=()=>{
  playlistDiv.innerHTML=""; albumTitle.textContent="";
  if(source.src){ nowPlaying.textContent="Now Playing: "+albums[currentAlbum||lastAlbum].songs[currentSong].title; }
  else nowPlaying.textContent="Now Playing: None";
};
albumsDiv.appendChild(homeSquare);

// Album tiles
Object.keys(albums).forEach(n=>{
  const d=document.createElement("div");
  d.className="album";
  d.innerHTML=`<img src="${albums[n].cover}"><div class="album-title">${n}</div>`;
  d.onclick=()=>loadAlbum(n);
  albumsDiv.appendChild(d);
});
</script>
</body>
</html>
