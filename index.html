<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Notables</title>

<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="Notables_Logo.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="Notables_Logo.jpg">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<style>
body {
    font-family: sans-serif;
  background: linear-gradient(135deg, #111 0%, #222 50%, #111 100%);
    color: #eee;
    text-align: center;
    margin:0;
    padding:20px;
}
/* Header with circular logo */
#mainHeader {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 10px;
    margin-bottom: 20px;
}
#mainHeader img#logo {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 50%;
}
#mainHeader h1 {
    margin: 0;
    font-size: 28px;
    font-weight: bold;
}
    
#albums {
    display: flex;         /* horizontal row */
    flex-wrap: wrap;       /* wrap to next line if needed */
    justify-content: center; /* center the row */
    gap: 25px;
    margin-bottom: 20px;
    padding: 0 20px;
}

.album, .home-square {
    width: 200px;
    flex: 0 0 200px;         /* fixed width */
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
}

.album img, .home-square img {
    width: 100%;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    border-radius: 12px;
    border: 2px solid #555;
    margin-bottom: 10px;
    transition: transform 0.2s;
}

.album img:hover, .home-square img:hover {
    transform: scale(1.05);
}

.album-title {
    font-weight: bold;
    margin-bottom: 5px;
}
    
 #homeWrapper {
    display: flex;
    justify-content: center; /* center the home button */
    margin-bottom: 20px;
}
    .album-row {
    display: flex;
    overflow-x: visible;
    flex-direction: row;
    justify-content: center;
    flex-wrap: wrap;
    gap: 25px;
   }
  @media (min-width: 1024px) {
  .album-row {
    flex-wrap: wrap; 
       }  
  }


#playerArea {
    margin-top: 10px;
}
#playlist button {
    margin: 5px;
    padding: 10px 15px;
    background: #222;
    border: 1px solid #555;
    color: #eee;
    cursor: pointer;
    border-radius: 5px;
    display: block;
    width: 220px;
    margin-left:auto;
    margin-right:auto;
    transition: background 0.2s, filter 0.2s;
}
#playlist button:hover {
    background: #444;
}
/* Playing song highlight */
#playlist button.playing {
    background: #555;
    color: #ccc;
    filter: brightness(0.8);
}

#nowPlaying { margin: 10px 0; font-weight: bold; }
audio { margin-top: 12px; width: 95%; max-width: 1000px; outline: none; background: #222; color: #eee; }

#controls {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    gap: 15px;
    align-items:center;
}
.control-btn {
    width: 50px; height: 50px;
    border-radius: 50%;
    border: none;
    background: #444;
    color: #fff;
    font-size: 20px;
    display:flex; justify-content:center; align-items:center;
    cursor:pointer;
    transition: transform 0.2s, filter 0.2s;
}
.control-btn:hover { transform: scale(1.1); filter: brightness(1.2); }
.control-btn.active { background:#666; filter:brightness(1.3); }
#play { width: 60px; height: 60px; font-size: 28px; }

@media (max-width:480px) {
    body {
        padding: 10px;
        font-size: 16px;
        padding-bottom: 160px;
    }

    #mainHeader img#logo { 
        width: 30px; 
        height: 30px; 
    }
    #mainHeader h1 { 
        font-size: 22px; 
    }

    #albums {
        display: flex;
        flex-direction: column;
        align-items: stretch; /* make children fill parent width */
        gap: 15px;             /* slightly larger gap between albums */
        padding: 0;            /* remove side padding */
    }

    /* Make album containers fill the screen width */
    .album, .home-square {
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
    }

    .album img {
        width: 100%;           /* fill container width */
        height: auto;          /* maintain aspect ratio */
        aspect-ratio: 1 / 1;   /* square shape */
        object-fit: cover;
        border-radius: 12px;
    }

    .control-btn { 
        width: 50px; 
        height: 50px; 
        font-size: 20px; 
    }
    #play { 
        width: 60px; 
        height: 60px; 
        font-size: 28px; 
    }
    #playlist button { 
        width: 95%; 
        padding: 12px; 
        font-size: 16px; 
    }
    audio { 
        width: 100%; 
    }
    #albumTitle { 
        font-size: 20px; 
    }

    #mobilePlayer {
        position: fixed;
        left: 0;
        width: 100%;
        background: #111;
        padding: 10px 0;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.5);
        z-index: 9999;
        transition: all 0.3s ease;
    }

    #mobilePlayer.docked { 
        position: absolute; 
        box-shadow: none; 
    }
    #albumTitle, #playlist { 
        margin-bottom: 20px; 
    }

    /* Home button full width */
    .home-square {
        background: #222;
        border: 1px solid #555;
        border-radius: 6px;
        padding: 12px;
        font-weight: bold;
        font-size: 18px;
        color: #eee;
        text-align: center;
        width: 100%;            
        box-sizing: border-box;
    }
    .home-square img { 
        display: none; 
    }
    .home-square:hover { 
        background: #333; 
    }
}

</style>
</head>
<body>

<div id="mainHeader">
  <img id="logo" src="Notables_Logo.jpg" alt="Notables Logo">
  <h1>Notables</h1>
</div>

<div id="homeWrapper"></div>
<div id="albums"></div>

<h2 id="albumTitle"></h2>
<div id="playerArea">
  <div id="playlist"></div>
  <p id="nowPlaying">Now Playing: None</p>
</div>

<div id="mobilePlayer">
  <div id="controls">
    <button id="shuffle" class="control-btn" title="Shuffle">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shuffle">
        <polyline points="16 3 21 3 21 8"></polyline>
        <line x1="4" y1="20" x2="21" y2="3"></line>
        <polyline points="21 16 21 21 16 21"></polyline>
        <line x1="15" y1="15" x2="21" y2="21"></line>
      </svg>
    </button>

    <button id="prev" class="control-btn" title="Previous">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
    </button>

    <button id="play" class="control-btn" title="Play/Pause">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="play-icon">&#9654;</svg>
    </button>

    <button id="next" class="control-btn" title="Next">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </button>

    <button id="repeat" class="control-btn" title="Repeat">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-repeat">
        <polyline points="17 1 21 5 17 9"></polyline>
        <path d="M3 11V9a4 4 0 014-4h14"></path>
        <polyline points="7 23 3 19 7 15"></polyline>
        <path d="M21 13v2a4 4 0 01-4 4H3"></path>
      </svg>
    </button>
  </div>
  <audio id="player" controls>
    <source id="source" src="" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
</div>

<script>
// --- Albums & Songs ---
const albums = {
  "Vessel": { cover:"Vessel.jpg", songs:[
    {file:"Ode_to_Sleep.mp3", title:"Ode to Sleep"},
    {file:"Migraine.mp3", title:"Migraine"},
    {file:"House_of_Gold.mp3", title:"House of Gold"},
    {file:"Car_Radio.mp3", title:"Car Radio"},
    {file:"Semi_Automatic.mp3", title:"Semi-Automatic"},
    {file:"Screen.mp3", title:"Screen"},
    {file:"The_Run_and_Go.mp3", title:"The Run and Go"},
    {file:"Fake_You_Out.mp3", title:"Fake You Out"},
    {file:"Guns_for_Hands.mp3", title:"Guns for Hands"},
    {file:"Truce.mp3", title:"Truce"},
    {file:"Addict_with_a_Pen.mp3", title:"Addict with a Pen"},
    {file:"Lovely.mp3", title:"Lovely"},
    {file:"Blasphemy.mp3", title:"Blasphemy"},
    {file:"Holding_on_to_you.mp3", title:"Holding on to You"}
  ]},
  "Blurryface": { cover:"Blurryface.jpg", songs:[
    {file:"Stressed_Out.mp3", title:"Stressed Out"},
    {file:"Ride.mp3", title:"Ride"},
    {file:"Fairly_Local.mp3", title:"Fairly Local"},
    {file:"Tear_in_My_Heart.mp3", title:"Tear in My Heart"},
    {file:"Lane_Boy.mp3", title:"Lane Boy"},
    {file:"The_Judge.mp3", title:"The Judge"},
    {file:"Doubt.mp3", title:"Doubt"},
    {file:"Polarize.mp3", title:"Polarize"},
    {file:"We_Dont_Believe_Whats_On_TV.mp3", title:"We Don't Believe What's on TV"},
    {file:"Message_Man.mp3", title:"Message Man"},
    {file:"Hometown.mp3", title:"Hometown"},
    {file:"Not_Today.mp3", title:"Not Today"},
    {file:"Goner.mp3", title:"Goner"}
  ]},
  "2009 - Twenty√∏ne": { cover:"2009_21_Cover.jpg", songs: [
    {file:"Implicit_Demand_For_Proof.mp3", title:"Implicit Demand For Proof"},
    {file:"Fall_Away.mp3", title:"Fall Away"},
    {file:"The_Pantaloon.mp3", title:"The Pantaloon"},
    {file:"Friend,_Please.mp3", title:"Friend, Please"},
    {file:"March_To_The_Sea.mp3", title:"March To The Sea"},
    {file:"Oh_Ms._Believer.mp3", title:"Oh Ms Believer"},
    {file:"Air_Catcher.mp3", title:"Air Catcher"},
    {file:"Trapdoor.mp3", title:"Trapdoor"},
    {file:"A_Car,_a_Torch,_a_Death.mp3", title:"A Car, a Torch, a Death"},
    {file:"Taxi_Cab.mp3", title:"Taxi Cab"},
    {file:"Before_You_Start_Your_Day.mp3", title:"Before You Start Your Day"},
    {file:"Isle_of_Flightless_Birds.mp3", title:"Isle of Flightless Birds"}
  ]},
  "Twenty√∏ne Pil√∏ts": { cover:"TwentyOne_Pilots.jpg", songs: [ 
    {file: "The_Outside.mp3", title: "The Outside"},
    {file: "City_Walls.mp3", title: "City Walls"},
    {file: "Tally.mp3", title: "Tally"},
    {file: "Rawfear.mp3", title: "Rawfear"},
    {file: "One_Way.mp3", title: "One Way"},
    {file: "Cottonwood.mp3", title: "Cottonwood"},
    {file: "Downstairs.mp3", title: "Downstairs"},
    {file: "Robot_Voices.mp3", title: "Robot Voices"},
    {file: "Center_Mass.mp3", title: "Center Mass"},
    {file: "Intentions.mp3", title: "Intentions"},
    {file: "Backslide.mp3", title: "Backslide"},
    {file: "Vignette.mp3", title: "Vignette"},
    {file: "Lavish.mp3", title: "Lavish"},
    {file: "Snap_Back.mp3", title: "Snap Back"},
    {file: "Oldies_Station.mp3", title: "Oldies Station"},
    {file: "Good_Day.mp3", title: "Good Day"},
    {file: "Jumpsuit.mp3", title: "Jumpsuit"},
    {file: "Levitate.mp3", title: "Levitate"},
    {file: "Morph.mp3", title: "Morph"},
    {file: "Smithereens.mp3", title: "Smithereens"},
    {file: "Neon_Gravestones.mp3", title: "Neon Gravestones"},
    {file: "Nico_And_The_Niners.mp3", title: "Nico And The Niners"},
    {file: "Cut_My_Lip.mp3", title: "Cut My Lip"},
    {file: "Pet_Cheetah.mp3", title: "Pet Cheetah"},
    {file: "Legend.mp3", title: "Legend"}
]},
 "Upstairs": { cover:"Upstairs.jpg", songs: [
     {file: "Have_You_Ever_Seen_The_Rain.mp3", title: "Have You Ever Seen The Rain"},
     {file: "Send_Me_On_My_Way.mp3", title: "Send Me On My Way"},
     {file: "Life_Is_A_Highway.mp3", title: "Life Is A Highway"},
     {file: "Right_There.mp3", title: "Right There"},
     {file: "High_On_Life.mp3", title: "High On Life"},
     {file: "Monks.mp3", title: "Monks"},
     {file: "Blue_Rooms.mp3", title: "Blue Rooms"}
 ]},   
 "Downstairs": { cover:"Downstairs.jpg", songs: [
    {file: "On_My_Own.mp3", title: "On My Own"},
    {file: "Points_Of_Authority.mp3", title: "Points Of Authority"},
    {file: "Hit_The_Floor.mp3", title: "Hit The Floor"},
    {file: "Give_It_Away.mp3", title: "Give It Away"},
    {file: "Breaking_the_Silence.mp3", title: "Breaking The Silence"},
    {file: "Would.mp3", title: "Would?"},
    {file: "Down_In_A_Hole.mp3", title: "Down In A Hole"},
    {file: "Usurper.mp3", title: "Usurper"},
    {file: "Polyphia.mp3", title: "Polyphia"},
    {file: "Doom.mp3", title: "Doom"},
    {file: "Saccharine.mp3", title: "Saccharine"},
    {file: "Do_You_Call_My_Name.mp3", title: "Do You Call My Name"},
    {file: "The_Outsider.mp3", title: "The Outsider"},
    {file: "A_Place_For_My_Head.mp3", title: "A Place For My Head"},
    {file: "Remember_The_Name.mp3", title: "Remember The Name"}
 ]}
};

    
let currentAlbum = null;
let currentSong = null;
let lastAlbum = null;
let shuffle = false;
let repeat = false;

const player = document.getElementById("player");
const source = document.getElementById("source");
const nowPlaying = document.getElementById("nowPlaying");
const albumTitle = document.getElementById("albumTitle");
const albumsDiv = document.getElementById("albums");
const playlistDiv = document.getElementById("playlist");
const playBtn = document.getElementById("play");
const shuffleBtn = document.getElementById("shuffle");
const repeatBtn = document.getElementById("repeat");

// Update playlist highlight ‚Äî only highlight the song that is actually playing in the current playlist
function updatePlaylistButtons(){
  const buttons = [...playlistDiv.querySelectorAll("button")];
  buttons.forEach((btn, i) => {
    // Only highlight if this is the current album AND this is the current song
    const isCurrentSong = currentSong === i && currentAlbum !== null && albums[currentAlbum].songs[currentSong].file === source.src.split('/').pop();
    btn.classList.toggle("playing", isCurrentSong);
  });
}

// --- Load album ---
function loadAlbum(name){
  currentAlbum = name;
  lastAlbum = name;
  albumTitle.textContent = name;
  playlistDiv.innerHTML = "";

  albums[name].songs.forEach((song,index)=>{
    // create playlist button
    const btn = document.createElement("button");
    btn.textContent = song.title;
    btn.addEventListener("click", ()=>playSong(index));
    playlistDiv.appendChild(btn);

    // üîπ preload audio in the background
    const audio = new Audio();
    audio.src = song.file;
    audio.preload = "auto";
  });

  updatePlaylistButtons();
}

// --- Play song ---
async function playSong(index, albumName=null){
  if(albumName && albumName !== currentAlbum) loadAlbum(albumName);
  if(!currentAlbum && lastAlbum) currentAlbum = lastAlbum;
  if(!currentAlbum) return;

  const songs = albums[currentAlbum].songs;
  if(index < 0 || index >= songs.length) return;

  currentSong = index;
  const song = songs[currentSong];

  // Default to original URL
  let songUrl = song.file;

  // Try offline cache
  if ('caches' in window) {
  try {
    songUrl = song.file; // always use real URL
  } catch (e) {
    console.error('Cache fetch error:', e);
  }
}


  // Set source and play
  source.src = songUrl;
  player.load();
  player.play();
  nowPlaying.textContent = "Now Playing: " + song.title;
  updatePlaylistButtons();
  playBtn.innerHTML = "&#10074;&#10074;";

  // Media Session metadata (use original HTTPS URL, not blob)
  if ('mediaSession' in navigator) {
    navigator.mediaSession.metadata = new MediaMetadata({
      title: song.title,
      artist: currentAlbum,
      album: currentAlbum,
      artwork: [{ src: 'https://sacchromyces.github.io/Albums/' + albums[currentAlbum].cover, sizes:'200x200', type:'image/jpeg'}]
    });

    navigator.mediaSession.setActionHandler('play',  () => { player.play(); });
    navigator.mediaSession.setActionHandler('pause', () => { player.pause(); });
    navigator.mediaSession.setActionHandler('previoustrack', prevTrack);
    navigator.mediaSession.setActionHandler('nexttrack', nextTrack);
  }
}

// --- Next/Prev ---
function nextTrack(){
  if(!currentAlbum) return;
  const songs = albums[currentAlbum].songs;
  let nextIndex;
  if(shuffle){
    do { nextIndex = Math.floor(Math.random() * songs.length); }
    while(nextIndex === currentSong && songs.length > 1);
  } else {
    nextIndex = currentSong + 1;
    if(nextIndex >= songs.length) nextIndex = 0;
  }
  playSong(nextIndex);
}

function prevTrack(){
  if(!currentAlbum) return;
  const songs = albums[currentAlbum].songs;
  let prevIndex = currentSong - 1;
  if(prevIndex < 0) prevIndex = songs.length - 1;
  playSong(prevIndex);
}

// --- Home tile ---
const homeSquare = document.createElement("div");
homeSquare.className = "home-square";
homeSquare.innerHTML = `<img src="Home.jpg" alt="Home"><div class="album-title">Home</div>`;
homeSquare.addEventListener("click", ()=>{
  playlistDiv.innerHTML = "";
  albumTitle.textContent = "";
});
document.getElementById("homeWrapper").appendChild(homeSquare);

// --- Album tiles grouped ---
const row = document.createElement("div");
row.className = "album-row";

["Vessel", "Blurryface", "2009 - Twenty√∏ne", "Twenty√∏ne Pil√∏ts", "Upstairs", "Downstairs"].forEach(name=>{
  const albumDiv = document.createElement("div");
  albumDiv.className = "album";
  albumDiv.innerHTML = `<img src="${albums[name].cover}" alt="${name}"><div class="album-title">${name}</div>`;
  albumDiv.addEventListener("click", ()=>loadAlbum(name));
  row.appendChild(albumDiv);
});

albumsDiv.appendChild(row);

// --- Album tiles (all others) ---
Object.keys(albums).forEach(name=>{
  if (["Vessel","Blurryface", "2009 - Twenty√∏ne", "Twenty√∏ne Pil√∏ts", "Upstairs", "Downstairs"].includes(name)) return;
  const albumDiv = document.createElement("div");
  albumDiv.className = "album";
  albumDiv.innerHTML = `<img src="${albums[name].cover}" alt="${name}"><div class="album-title">${name}</div>`;
  albumDiv.addEventListener("click", ()=>loadAlbum(name));
  albumsDiv.appendChild(albumDiv);
});

// --- Controls ---
playBtn.addEventListener("click", ()=>{
  if(player.paused){
    if(currentSong === null){
      const albumNames = Object.keys(albums);
      const randomAlbum = albumNames[Math.floor(Math.random() * albumNames.length)];
      const songIndex = Math.floor(Math.random() * albums[randomAlbum].songs.length);
      playSong(songIndex, randomAlbum);
    } else {
      player.play();
    }
    playBtn.innerHTML = "&#10074;&#10074;";
  } else {
    player.pause();
    playBtn.innerHTML = "&#9654;";
  }
});
document.getElementById("next").addEventListener("click", nextTrack);
document.getElementById("prev").addEventListener("click", prevTrack);
shuffleBtn.addEventListener("click", ()=>{ shuffle = !shuffle; shuffleBtn.classList.toggle("active", shuffle); });
repeatBtn.addEventListener("click", ()=>{ repeat = !repeat; repeatBtn.classList.toggle("active", repeat); });

player.addEventListener("pause", ()=>playBtn.innerHTML="&#9654;");
player.addEventListener("play", ()=>playBtn.innerHTML="&#10074;&#10074;");

player.addEventListener("ended", ()=>{
  if(repeat){
    playSong(currentSong);
  } else {
    nextTrack();
  }
});

// --- Mobile sticky ---
const mobilePlayer = document.getElementById("mobilePlayer");
window.addEventListener('scroll', ()=>{
  if(window.innerWidth > 480) return;
  const nowPlayingRect = nowPlaying.getBoundingClientRect();
  const scrollBottom = document.documentElement.scrollHeight - window.innerHeight - (window.pageYOffset || document.documentElement.scrollTop);
  const distanceToNowPlayingBottom = nowPlayingRect.bottom + window.scrollY;
  if(scrollBottom < 5){
    mobilePlayer.style.position = 'absolute';
    mobilePlayer.style.top = (distanceToNowPlayingBottom + 15) + 'px';
    mobilePlayer.style.bottom = 'auto';
  } else {
    mobilePlayer.style.position = 'fixed';
    mobilePlayer.style.bottom = '0';
    mobilePlayer.style.top = 'auto';
  }
});

    // Initialize play button symbol on page load
playBtn.innerHTML = "&#9654;"; // ‚ñ∫
    
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/sw.js")
    .then(() => console.log("Service Worker registered"))
    .catch(err => console.error("SW registration failed:", err));
}

</script>
</body>
</html>







